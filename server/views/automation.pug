extends layout


block content
  .container.mt-3
    if alert
      .alert.alert-danger.d-flex.align-items-center.alert-dismissible.fade.show(role='alert')
        svg.bi.bi-exclamation-triangle-fill.flex-shrink-0.me-2(xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill='currentColor' viewBox='0 0 16 16' role='img' aria-label='Warning:')
          path(d='M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z')
        div. 
          #{alert}
        button.btn-close(type='button' data-bs-dismiss='alert' aria-label='Close')
    h1 Automation 
    p.lead Here you can upload a txt-file which contains a url per line. 
    .mb-3
      form(enctype='multipart/form-data', method='post',  id='uploadForm' )
        .mb-3
          label.form-label(for='formFile') Upload Url-file
          input#formFile.form-control(type='file' name="urlfile", required)
        input.btn.btn-primary(type='submit' value='Upload')
    h3 Url List
    .mb-3
      textarea.form-control#urlList(rows='3', readOnly="true")
        |#{testurls}

    hr
    h2 Automation control
    p Start automatic url calling and see the progress
    .progress.position-relative.mb-4(style="height: 20px;")
      .progress-bar#progress(role='progressbar' style='width: 0%' aria-valuenow='60' aria-valuemin='0' aria-valuemax='100')
      .justify-content-center.d-flex.position-absolute.w-100#progressText Start Test
    .row.mx-0
      button.btn.btn-primary.col-2.me-3#startTest(type='button') Start Test
      button.btn.btn-primary.col-2#stopTest(type='button') Stop Test
  script(src="/js/automation.js")